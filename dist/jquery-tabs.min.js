/*! jQuery tabs - v0.1.1 - 2013-07-28
* https://github.com/amazingSurge/jquery-tabs
* Copyright (c) 2013 amazingSurge; Licensed GPL */
(function(t,e,s,n){"use strict";var a=s(e),i=s.Tabs=function(t,e){var n=this;this.element=t,this.$element=s(t);var a=[];s.each(this.$element.data(),function(t,e){var s=RegExp("^tabs","i");s.test(t)&&(a[t.toLowerCase().replace(s,"")]=e)}),this.options=s.extend(!0,{},i.defaults,e,a),this.namespace=this.options.namespace,this.classes={activeTab:this.namespace+"_active",activePanes:this.namespace+"_active",effect:this.namespace+"-"+this.options.effect,show:this.namespace+"-"+this.options.effect+"_show",panes:this.namespace+"-panes",skin:this.namespace+"_"+this.options.skin},this.$tabItems=this.$element.children(),this.$panes=s(this.options.panes).addClass(this.classes.panes+" "+this.classes.effect),this.$paneItems=this.$panes.children(),this.options.skin&&(this.$element.addClass(this.classes.skin),this.$panes.addClass(this.classes.skin)),this.$loading=s('<span class="'+this.namespace+'-loading"></span>'),this.options.ajax===!0&&(this.ajax=[],s.each(this.$tabItems,function(t,e){var a={};a.href=s(e).data("href"),n.ajax.push(a)})),this.init()};i.defaults={namespace:"tabs",panes:".panes",skin:null,initialIndex:0,effect:"fade",ajax:!1,cached:!1,history:!1,keyboard:!1,event:"click"},i.prototype={constructor:i,init:function(){var t=this;this.active(this.options.initialIndex),this.$tabItems.on(this.options.event,function(e){var n=s(e.target).index();return t.active(n),t.afterActive(),!1}),a.trigger("tabs::init",this)},active:function(t){var e=this;this.current!==t&&(this.current=t,this.$tabItems.eq(t).addClass(this.classes.activeTab).siblings().removeClass(this.classes.activeTab),this.$paneItems.eq(t).addClass(this.classes.activePanes).siblings().removeClass(this.classes.activePanes),this.$paneItems.removeClass(this.classes.show),a.trigger("tabs::active",this),this.options.ajax===!0&&this.ajaxLoad(t),setTimeout(function(){e.$paneItems.eq(t).addClass(e.classes.show)},0))},afterActive:function(){a.trigger("tabs::afterActive",this)},ajaxLoad:function(t){var e,n=this;(this.options.cached!==!0||this.ajax[t].cached!==!0)&&(this.showLoading(),e=s.ajax({url:this.ajax[t].href}),e.done(function(e){n.ajax[t].cached=!0,n.hideLoading(),n.$paneItems.eq(t).html(e)}),e.fail(function(){n.hideLoading(),n.$paneItems.eq(t).html("failed")}))},showLoading:function(){this.$loading.appendTo(this.$panes)},hideLoading:function(){this.$loading.remove()},getTabs:function(){return this.$tabItems},getPanes:function(){return this.$paneItems},getCurrentPane:function(){return this.$paneItems.eq(this.current)},getCurrentTab:function(){return this.$tabItems.eq(this.current)},getIndex:function(){return this.current},next:function(){var t=this.$tabItems.length,e=this.current;t-1>e?e++:e=0,this.active(e)},prev:function(){var t=this.$tabItems.length,e=this.current;0===e?e=Math.abs(1-t):e-=1,this.active(e)},destroy:function(){this.$element.remove()}},s.fn.tabs=function(t){if("string"!=typeof t)return this.each(function(){s.data(this,"tabs")||s.data(this,"tabs",new i(this,t))});var e=t,a=arguments.length>1?Array.prototype.slice.call(arguments,1):n;if(!/^(getTabs|getPanes|getCurrentPane|getCurrentTab|getIndex)$/.test(e))return this.each(function(){var t=s.data(this,"tabs");t&&"function"==typeof t[e]&&t[e].apply(t,a)});var h=this.first().data("tabs");return h&&"function"==typeof h[e]?h[e].apply(h,a):n}})(window,document,jQuery),function(t,e,s){var n=s(e),a={states:{},refresh:!1,stopHashchangeEvent:!1,on:function(e,n){var a=this;s(t).on(e,function(t){return a.stopHashchangeEvent?!1:(n(t),!1)})},off:function(e){s(t).off(e)},pushState:function(t){for(id in t)this.states[id]=t[id];this.refresh=!1,this.stopHashchangeEvent=!0,setTimeout(s.proxy(this.changeStates,this),0)},changeStates:function(){var e=this,n="";this.refresh!==!0&&(s.each(this.states,function(t,e){n+=t+"="+e+"&"}),t.location.hash=n.substr(0,n.length-1),this.refresh=!0,setTimeout(function(){e.stopHashchangeEvent=!1},0))},getState:function(){var e,n=t.location.hash.replace("#","").replace("!",""),a={};return""===n?{}:(e=n.split("&"),s.each(e,function(t,e){if(0!=e){var s=e.match("#?(.*)=(.*)");s&&(a[s[1]]=s[2])}}),a)},reset:function(){this.refresh!==!0&&(this.states={},t.location.hash="#/",this.refresh=!0)}};n.on("tabs::init",function(t,e){if(e.options.history!==!1){var n=function(){var t,n=a.getState(),i=e.$element.attr("id");if(n[i]&&(t=s("#"+i).data("tabs"))){var h=e.$element.find("#"+n[i]);h.length>=1?t.active(e.$tabItems.index(h)):t.active(n[i])}};a.on("hashchange.tabs",n)}}),n.on("tabs::afterActive",function(t,e){var s=e.current,n={},i=e.$element.attr("id"),h=e.$tabItems.eq(s).attr("id");e.options.history!==!1&&(n[i]=h?h:s,a.pushState(n))}),setTimeout(function(){s(t).trigger("hashchange.tabs")},0)}(window,document,jQuery),function(t,e,s){var n=s(e),a={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in a.map&&"function"==typeof a.map[e]&&a.map[e].call(self,t)},attach:function(t){var e,s;for(e in t)t.hasOwnProperty(e)&&(s=e.toUpperCase(),s in a.keys?a.map[a.keys[s]]=t[e]:a.map[s]=t[e]);a.bound||(a.bound=!0,n.bind("keydown",a.press))},detach:function(){a.bound=!1,a.map={},n.unbind("keydown",a.press)}};n.on("tabs::init",function(t,e){e.options.keyboard!==!1&&(e.$element.attr("tabindex","0").on("focus",function(){return a.attach({left:s.proxy(e.prev,e),right:s.proxy(e.next,e)}),!1}).on("blur",function(){return a.detach(),!1}),e.$panes.attr("tabindex","0").on("focus",function(){return a.attach({left:s.proxy(e.prev,e),right:s.proxy(e.next,e)}),!1}).on("blur",function(){return a.detach(),!1}))})}(window,document,jQuery);