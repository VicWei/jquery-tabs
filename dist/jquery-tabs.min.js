/*! jQuery tabs - v0.1.1 - 2013-07-24
* https://github.com/amazingSurge/jquery-tabs
* Copyright (c) 2013 amazingSurge; Licensed GPL */
(function(t,e,s,a){"use strict";var n=s(e),i=s.Tabs=function(t,e){var a=this;this.element=t,this.$element=s(t);var n=[];s.each(this.$element.data(),function(t,e){var s=RegExp("^tabs","i");s.test(t)&&(n[t.toLowerCase().replace(s,"")]=e)}),this.options=s.extend(!0,{},i.defaults,e,n),this.namespace=this.options.namespace,this.classes={activeTab:this.namespace+"_active",activePanes:this.namespace+"_active",effect:this.namespace+"-"+this.options.effect,show:this.namespace+"-"+this.options.effect+"_show",panes:this.namespace+"-panes",skin:this.namespace+"_"+this.options.skin},this.$tabItems=this.$element.children(),this.$panes=s(this.options.panes).addClass(this.classes.panes+" "+this.classes.effect),this.$paneItems=this.$panes.children(),this.options.skin&&(this.$element.addClass(this.classes.skin),this.$panes.addClass(this.classes.skin)),this.$loading=s('<span class="'+this.namespace+'-loading"></span>'),this.options.ajax===!0&&(this.ajax=[],s.each(this.$tabItems,function(t,e){var n={};n.href=s(e).data("href"),a.ajax.push(n)})),this.init()};i.defaults={namespace:"tabs",panes:".panes",skin:null,initialIndex:0,effect:"fade",ajax:!1,cached:!1,history:!1,keyboard:!1,event:"click"},i.prototype={constructor:i,init:function(){var t=this;this.active(this.options.initialIndex),this.$tabItems.on(this.options.event,function(e){var a=s(e.target).index();return t.active(a),t.afterActive(),!1}),n.trigger("tabs::init",this)},active:function(t){var e=this;this.current!==t&&(this.current=t,this.$tabItems.eq(t).addClass(this.classes.activeTab).siblings().removeClass(this.classes.activeTab),this.$paneItems.eq(t).addClass(this.classes.activePanes).siblings().removeClass(this.classes.activePanes),this.$paneItems.removeClass(this.classes.show),n.trigger("tabs::active",this),this.options.ajax===!0&&this.ajaxLoad(t),setTimeout(function(){e.$paneItems.eq(t).addClass(e.classes.show)},0))},afterActive:function(){n.trigger("tabs::afterActive",this)},ajaxLoad:function(t){var e,a=this;(this.options.cached!==!0||this.ajax[t].cached!==!0)&&(this.showLoading(),e=s.ajax({url:this.ajax[t].href}),e.done(function(e){a.ajax[t].cached=!0,a.hideLoading(),a.$paneItems.eq(t).html(e)}),e.fail(function(){a.hideLoading(),a.$paneItems.eq(t).html("failed")}))},showLoading:function(){this.$loading.appendTo(this.$panes)},hideLoading:function(){this.$loading.remove()},getTabs:function(){return this.$tabItems},getPanes:function(){return this.$paneItems},getCurrentPane:function(){return this.$paneItems.eq(this.current)},getCurrentTab:function(){return this.$tabItems.eq(this.current)},getIndex:function(){return this.current},next:function(){var t=this.$tabItems.length,e=this.current;t-1>e?e++:e=0,this.active(e)},prev:function(){var t=this.$tabItems.length,e=this.current;0===e?e=Math.abs(1-t):e-=1,this.active(e)},destroy:function(){this.$element.remove()}},s.fn.tabs=function(t){if("string"!=typeof t)return this.each(function(){s.data(this,"tabs")||s.data(this,"tabs",new i(this,t))});var e=t,n=arguments.length>1?Array.prototype.slice.call(arguments,1):a;if(!/^(getTabs|getPanes|getCurrentPane|getCurrentTab|getIndex)$/.test(e))return this.each(function(){var t=s.data(this,"tabs");t&&"function"==typeof t[e]&&t[e].apply(t,n)});var h=this.first().data("tabs");return h&&"function"==typeof h[e]?h[e].apply(h,n):a}})(window,document,jQuery),function(t,e,s){var a=s(e),n={states:{},reflash:!1,pushState:function(t){for(id in t)this.states[id]=t[id];this.reflash=!1,setTimeout(s.proxy(this.changeStates,this),0)},changeStates:function(){var e="";this.reflash!==!0&&(s.each(this.states,function(t,s){e+=t+"="+s+"&"}),t.location.hash=e.substr(0,e.length-1),this.reflash=!0)},getState:function(){var e,a=t.location.hash.replace("#","").replace("!",""),n={};return""===a?{}:(e=a.split("&"),s.each(e,function(t,e){if(0!=e){var s=e.match("#?(.*)=(.*)");s&&(n[s[1]]=s[2])}}),n)},reset:function(){this.reflash!==!0&&(this.states={},t.location.hash="#/",this.reflash=!0)}};a.on("tabs::init",function(e,a){a.options.history!==!1&&s(t).on("hashchange.tabs",function(){var t,e=n.getState(),i=a.$element.attr("id");if(e[i]&&(t=s("#"+i).data("tabs"))){var h=a.$element.find("#"+e[i]);h.length>=1?h.click():t.active(e[i])}})}),a.on("tabs::afterActive",function(t,e){var s=e.current,a={},i=e.$element.attr("id"),h=e.$tabItems.eq(s).attr("id");e.options.history!==!1&&(a[i]=h?h:s,n.pushState(a))}),setTimeout(function(){s(t).trigger("hashchange.tabs")},0)}(window,document,jQuery),function(t,e,s){var a=s(e),n={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in n.map&&"function"==typeof n.map[e]&&n.map[e].call(self,t)},attach:function(t){var e,s;for(e in t)t.hasOwnProperty(e)&&(s=e.toUpperCase(),s in n.keys?n.map[n.keys[s]]=t[e]:n.map[s]=t[e]);n.bound||(n.bound=!0,a.bind("keydown",n.press))},detach:function(){n.bound=!1,n.map={},a.unbind("keydown",n.press)}};a.on("tabs::init",function(t,e){e.options.keyboard!==!1&&(e.$element.attr("tabindex","0").on("focus",function(){return n.attach({left:s.proxy(e.prev,e),right:s.proxy(e.next,e)}),!1}).on("blur",function(){return n.detach(),!1}),e.$panes.attr("tabindex","0").on("focus",function(){return n.attach({left:s.proxy(e.prev,e),right:s.proxy(e.next,e)}),!1}).on("blur",function(){return n.detach(),!1}))})}(window,document,jQuery);